title: Home
icon: mdi:home
path: home
type: sidebar
cards:
  - type: horizontal-stack
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: entity
            entity: person.marco_cunha
            use_entity_picture: true
            content_info: state
          - type: entity
            entity: person.darlene_parreira
            use_entity_picture: true
            content_info: state
      - type: custom:mushroom-chips-card
        chips:
          - type: alarm-control-panel
            entity: alarm_control_panel.ajax_security_system
          - type: entity
            entity: cover.curtains_group
            name: Estores
            content_info: state
            tap_action:
              action: toggle
            icon_color: amber
          - type: entity
            entity: binary_sensor.sensor_garage_door_contact
            double_tap_action:
              action: none
            name: Garagem
            content_info: state
            tap_action:
              action: call-service
              service: script.garage
              target: {}
            hold_action:
              action: none
            icon: mdi:garage-lock
            use_entity_picture: false
            icon_color: amber
          - type: entity
            entity: switch.torradeira_plug
            icon_color: amber
            double_tap_action:
              action: none
            name: Torradeira
            content_info: state
            tap_action:
              action: toggle
            hold_action:
              action: none
      - type: custom:mushroom-chips-card
        chips:
          - type: entity
            entity: sensor.sensor_temperature_humidity_sala_temperature
            icon_color: deep-orange
          - type: entity
            entity: sensor.sensor_temperature_humidity_sala_humidity
            icon_color: blue

  - type: horizontal-stack
    cards:
      - type: custom:mushroom-title-card
  - square: false
    columns: 3
    type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    content: >-
                      Sunrise  {% if states.sun.sun %} {{
                      (as_timestamp(states.sun.sun.attributes.next_rising)) |
                      timestamp_custom(('%H:%M') )}} {% endif %}
                    icon: mdi:weather-sunset-up
                  - type: template
                    content: >-
                      Sunset  {% if states.sun.sun %} {{
                      (as_timestamp(states.sun.sun.attributes.next_setting)) |
                      timestamp_custom(('%H:%M') )}} {% endif %}
                    icon: mdi:weather-sunset-down
              - type: custom:hourly-weather
                entity: weather.openweathermap
                num_segments: 9 # optional, defaults to 12
                name: null # optional, defaults to "Hourly Weather"
                show_precipitation_amounts: true
                show_precipitation_probability: true
                colors:
                  sunny: yellow
              - type: custom:mushroom-vacuum-card
                entity: vacuum.dreame_bot_z10_pro
                icon_animation: true
                name: Rosita
                layout: horizontal
                commands:
                  - return_home
                  - start_pause
                fill_container: false
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    primary: Clean - Public
                    secondary: ""
                    icon: mdi:sofa
                    icon_color: orange
                    entity: script.vacuum_clean_social_areas
                    layout: horizontal
                    tap_action:
                      action: call-service
                      service: script.vacuum_clean_social_areas
                      data: {}
                      target: {}
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  - type: custom:mushroom-template-card
                    primary: Clean - Private
                    secondary: ""
                    icon: mdi:bed
                    icon_color: red
                    entity: script.vacuum_clean_private_areas
                    layout: horizontal
                    tap_action:
                      action: call-service
                      service: script.vacuum_clean_private_areas
                      data: {}
                      target: {}
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: "custom:button-card"
                entity: switch.bomba_piscina_switch_0
                icon: mdi:water-pump
                show_state: false
                name: Bomba
                state:
                  - value: "on"
                    color: rgb(255,191,0)
                    name: >
                      [[[var sen = states['sensor.swimming_pool_pump_on_today'].state
                          return '' + (sen ? sen : '0') + 'h';
                        ]]]
                  - value: "off"
                    color: rgb(100,100,100)
                styles:
                  card:
                    - --mdc-ripple-color: rgb(255,191,0)
                    - --mdc-ripple-press-opacity: 0.5
                    - font-size: 15px
                  custom_fields:
                    worked_time:
                      - background-color: >
                          [[[
                            if (states['sensor.swimming_pool_pump_on_today'].state < states['input_number.swimming_pool_minimum_duration_h'].state)
                              return "maroon";
                            return "darkolivegreen";
                          ]]]
                      - border-radius: 50%
                      - position: absolute
                      - right: 5%
                      - top: 5%
                      - height: 30px
                      - width: 30px
                      - font-size: 12px
                      - font-weight: bold
                      - line-height: 30px
                aspect_ratio: 1/1
                tap_action:
                  action: toggle
                custom_fields:
                  worked_time: >
                    [[[ return states['sensor.swimming_pool_pump_on_today'].state ]]]

              - type: "custom:button-card"
                entity: switch.projectores_piscina_switch_0
                icon: mdi:light-flood-up
                show_state: false
                name: Piscina
                state:
                  - value: "on"
                    color: rgb(255,191,0)
                  - value: "off"
                    color: rgb(100,100,100)
                styles:
                  card:
                    - --mdc-ripple-color: rgb(255,191,0)
                    - --mdc-ripple-press-opacity: 0.5
                    - font-size: 15px
                aspect_ratio: 1/1
                tap_action:
                  action: toggle
              - type: "custom:button-card"
                entity: switch.hot_water
                icon: mdi:water-thermometer-outline
                show_state: false
                name: Água quente
                state:
                  - value: "on"
                    color: rgb(255,191,0)
                  - value: "off"
                    color: rgb(100,100,100)
                styles:
                  card:
                    - --mdc-ripple-color: rgb(255,191,0)
                    - --mdc-ripple-press-opacity: 0.5
                    - font-size: 15px
                aspect_ratio: 1/1
                tap_action:
                  action: toggle
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:power-flow-card
                entities:
                  grid: sensor.contador_consumo_channel_1_power
                  solar: sensor.contador_producao_channel_1_power
                watt_threshold: 1000
                dashboard_link: /energy
              - type: custom:mushroom-template-card
                primary: "Price: {{states('sensor.energy_net_price')|round(3)}} €/kWh"
                secondary: "OMIE: {{states('sensor.energy_omie_price')|round(3)}} €/MWh"
                icon: mdi:transmission-tower-import
                multiline_secondary: false
                entity: sensor.energy_tracker_sensor
                tap_action:
                  action: navigate
                  navigation_path: /energy
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                layout: horizontal
                icon_color: white
                card_mod:
                  style: |
                    ha-card {
                        --card-primary-font-size: 1.2rem;
                        border: none;
                        box-shadow: none;
                        background: rgba(0,0,0,0);
                        margin-top: -0.5rem;
                        margin-bottom: 1.5rem;
                        flex-direction: inherit !important;
                    }
    view_layout:
      position: main
  - type: horizontal-stack
    cards:
      - show_state: false
        show_name: true
        camera_view: auto
        type: picture-entity
        entity: camera.garagem_sub
        name: Garagem
      - show_state: false
        show_name: true
        camera_view: auto
        type: picture-entity
        entity: camera.frente_sub
        name: Frente
      - show_state: false
        show_name: true
        camera_view: auto
        type: picture-entity
        entity: camera.piscina_sub
        name: Piscina
      - show_state: false
        show_name: true
        camera_view: auto
        type: picture-entity
        entity: camera.traseira_sub
        name: Traseiras
